# ü•≠ Fruits Map API

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–µ—Å—Ç —Å —Ñ—Ä—É–∫—Ç–∞–º–∏, –æ–≤–æ—â–∞–º–∏ –∏ —Ñ–µ—Ä–º–µ—Ä—Å–∫–∏–º–∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ –≤ –ì—É—à-–î–∞–Ω–µ.  
Backend –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ FastAPI + PostgreSQL (Supabase).

---

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- üìç –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (CRUD + –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- üìç –ú–µ—Å—Ç–∞ (CRUD, –ø–æ–∏—Å–∫, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞)
- ‚≠êÔ∏è –û—Ç–∑—ã–≤—ã —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ –∏ —Ñ–æ—Ç–æ
- üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- üîë –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω
- üõë –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- üìú –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- üóÇÔ∏è –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (`/static/uploads/`)

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îÇ
‚îú‚îÄ‚îÄ routers/              # –†–æ—É—Ç–µ—Ä—ã (places, categories, reviews, files –∏ –¥—Ä.)
‚îú‚îÄ‚îÄ utils/                # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ static/uploads/       # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ logs/                 # –õ–æ–≥–∏
‚îú‚îÄ‚îÄ database.py           # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ
‚îú‚îÄ‚îÄ models.py             # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ schemas.py            # Pydantic —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ exceptions.py         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ logger.py             # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ auth.py               # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ main.py               # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

---

## ‚öôÔ∏è –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

### 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/yourusername/fruits-map.git
cd fruits-map/backend
```

### 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
python -m venv .venv
source .venv/Scripts/activate  # Windows
# –∏–ª–∏
source .venv/bin/activate      # Mac/Linux

pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª `.env`:

```env
DATABASE_URL=postgresql://postgres:[YOUR_PASSWORD]@db.[YOUR_SUPABASE].supabase.co:5432/postgres
ADMIN_TOKEN=[YOUR_SECRET_ADMIN_TOKEN]
```

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
uvicorn main:app --reload
```

### 5. –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

- Swagger UI ‚Üí [http://localhost:8000/docs](http://localhost:8000/docs)
- ReDoc ‚Üí [http://localhost:8000/redoc](http://localhost:8000/redoc)

---

## üåç –ë–∞–∑–æ–≤—ã–π URL

```
http://localhost:8000
```

---

## üõ°Ô∏è –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)

–î–ª—è –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ) –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏:

```
X-Token: [YOUR_ADMIN_TOKEN]
```

–í—Å–µ GET-–∑–∞–ø—Ä–æ—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

---

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–æ–¥—É–ª—å     | –≠–Ω–¥–ø–æ–∏–Ω—Ç                        | –û–ø–∏—Å–∞–Ω–∏–µ                                |
|-------------|----------------------------------|------------------------------------------|
| üîç Places      | `/places/`                      | CRUD –¥–ª—è –º–µ—Å—Ç                           |
| üîç Places      | `/places/search/`               | –ü–æ–∏—Å–∫ –º–µ—Å—Ç –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ      |
| üìö Categories  | `/categories/`                  | CRUD –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π                      |
| ‚≠êÔ∏è Reviews     | `/reviews/`                     | CRUD –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤                        |
| üì• Files       | `/files/upload/`                | –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π                    |
| üí° Suggestions | `/category-suggestions/`        | –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π             |

---

## üîç –ü–æ–∏—Å–∫ –º–µ—Å—Ç

```
GET /places/search/
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã (–ª—é–±—ã–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –û–ø–∏—Å–∞–Ω–∏–µ                                      |
|-------------|-----------------------------------------------|
| category_id | –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏                           |
| min_rating  | –§–∏–ª—å—Ç—Ä –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É —Ä–µ–π—Ç–∏–Ω–≥—É               |
| has_photo   | true / false ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –Ω–∞–ª–∏—á–∏—é —Ñ–æ—Ç–æ         |
| search      | –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏—é                  |
| sort_by     | name / created_at / rating                    |
| order       | asc / desc                                    |

---

## üèóÔ∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏

- –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π:

```
GET /categories/
```

- –ü–æ–ª—É—á–∏—Ç—å –º–µ—Å—Ç–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

```
GET /places/search/?category_id=ID
```

---

## ‚≠êÔ∏è –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤

```
POST /reviews/
```

### –ü—Ä–∏–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞:

```json
{
  "place_id": 1,
  "rating": 5,
  "comment": "–û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ!",
  "author_name": "–°–∞—à–∞",
  "photo": "http://localhost:8000/uploads/uuid.jpg"
}
```

---

## üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```
POST /files/upload/
```

### –§–æ—Ä–º–∞—Ç Form-Data:

| –ö–ª—é—á  | –ó–Ω–∞—á–µ–Ω–∏–µ     |
|-------|---------------|
| file  | –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (.jpg, .png, .webp) |

### –û—Ç–≤–µ—Ç:

```json
{
  "filename": "uuid.jpg",
  "url": "/uploads/uuid.jpg"
}
```

---

## üñºÔ∏è –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

- –í—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ URL:

```
http://localhost:8000/uploads/filename.jpg
```

---

## üóëÔ∏è –ê–¥–º–∏–Ω-–¥–µ–π—Å—Ç–≤–∏—è

–î–ª—è –≤—Å–µ—Ö POST, PUT, DELETE-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –º–µ—Å—Ç–∞–º –∏ –æ—Ç–∑—ã–≤–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫:

```
X-Token: [YOUR_ADMIN_TOKEN]
```

---

## ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫

```json
{
  "status": "error",
  "code": 404,
  "message": "Place not found"
}
```

---

## üèóÔ∏è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:8000/docs
```

---

## üèóÔ∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- Python
- FastAPI
- SQLAlchemy
- PostgreSQL (Supabase)
- Uvicorn

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

## üî• –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–æ–µ–∫—Ç: **Fruits Map**  
–ê–≤—Ç–æ—Ä: **–°–∞—à–∞ –ì–æ–ª—å–¥–µ–Ω–±–µ—Ä–≥**  
GitHub: [https://github.com/yourusername](https://github.com/yourusername)  
Telegram: [@goldenberga](https://t.me/goldenberga)